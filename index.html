<HTML>
<head>
	<style>
		.display-box{
			min-height:200px;
			border:1px solid #000;
			padding:15px;
			margin:15px;
		}
	</style>
 	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
<button onClick="addDish()">Add Dish</button>
<button onClick="getDishes()">Get All Dishes</button>
<button onClick="getDishesByName()">Get Dish by name</button>
<button onClick="getDishesByCategory()">Get Dish by category</button>
<button onClick="getDishesByType()">Get Dish by type</button>
<button onClick="updateDishes()">update Dish by name</button>
<button onClick="deleteDishes()">Delete Dish by name</button>
<button onClick="addReview()">Add Review</button>
<div id="display-box" class="display-box"></div>

<script>
function printData(data){
	jsonStr = data;
	regeStr = '',
    f = {
        brace: 0
	}; // for tracking matches, in particular the curly braces
	regeStr = jsonStr.replace(/({|}[,]*|[^{}:]+:[^{}:,]*[,{]*)/g, function (m, p1) {
    	var rtnFn = function() {
            return '<div style="text-indent: ' + (f['brace'] * 20) + 'px;">' + p1 + '</div>';
        },
        rtnStr = 0;
    	if (p1.lastIndexOf('{') === (p1.length - 1)) {
        	rtnStr = rtnFn();
        	f['brace'] += 1;
    	} else if (p1.indexOf('}') === 0) {
        	f['brace'] -= 1;
        	rtnStr = rtnFn();
    	} else {
        	rtnStr = rtnFn();
    	}
    	return rtnStr;
	});
	document.getElementById('display-box').innerHTML += regeStr;
}
function addDish(){
	let name = prompt("Name");
	let category = prompt("Category");
	let type = prompt("Type");
	axios({
		method: 'post',
		url:"https://food-truck-dummy-api.herokuapp.com/addDishes",
		data:{
			"name":name,
			"category": category,
			"type":type
		}
	})
}
function getDishes(){
	axios.get("https://food-truck-dummy-api.herokuapp.com/dishes").then(request=>printData(request.data))
}
function getDishesByName(){
	let name = prompt("Name");
	axios.get("https://food-truck-dummy-api.herokuapp.com/dishes/name/"+name).then(request=>printData(request.data))
}
function getDishesByCategory(){
	let category = prompt("Category");
	axios.get("https://food-truck-dummy-api.herokuapp.com/dishes/category/"+category).then(request=>printData(request.data))
}
function getDishesByType(){
	let type = prompt("Type");
	axios.get("https://food-truck-dummy-api.herokuapp.com/dishes/type/"+type).then(request=>printData(request.data))
}
function updateDishes(){
	let name = prompt("Name");
	let newName = prompt("New Name");
	let category = prompt("Category");
	let type = prompt("Type");
	axios({
		method: 'post',
		url:"https://food-truck-dummy-api.herokuapp.com/updateDishes/"+name,
		data:{
			"name":newName,
			"category": category,
			"type":type
		}
	})
}
function deleteDishes(){
	let name = prompt("Name");
	axios.delete("https://food-truck-dummy-api.herokuapp.com/deleteDishes/"+name)
}
function addReview(){
	let name = prompt("Name");
	let review = prompt("Review");
	axios({
		method: 'post',
		url:"https://food-truck-dummy-api.herokuapp.com/addReview",
		data:{
			"name":name,
			"review": review
		}
	})
}
</script>
</body>
</HTML>



